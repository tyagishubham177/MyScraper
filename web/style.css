:root {
  --success-color: #28a745;
  --danger-color: #dc3545;
  --secondary-color: #6c757d;
}

    html {
      height: 100%;
      overflow-y: auto; /* Allow scrolling on html element */
    }
body {
  font-family: 'Inter', Arial, sans-serif;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  position: relative; /* Needed for z-indexing of particles-js */
  overflow-x: hidden; /* Prevent horizontal scrollbars */
  overflow-y: auto;   /* Allow vertical scrolling for the body */
  padding-top: 0; /* Changed from 2rem to 0 */
  padding-bottom: 2rem; /* Add some padding if card is very tall */
}

button, .btn {
  touch-action: manipulation;
}

/* Page Header Styles */
.page-header {
  width: 100%;
  box-sizing: border-box;
  padding: 1rem 0;
  background: linear-gradient(135deg, #4facfe, #00f2fe);
  border-bottom: 1px solid rgba(209, 213, 219, 0.5);
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  animation: slideDown 0.6s ease-out forwards;
}

.page-header .container {
  max-width: 100%;
  padding-left: 1rem;
  padding-right: 1rem;
  display: flex;
  align-items: center;
  justify-content: flex-start;
}

.page-header img {
  height: 40px;
  width: 120px; /* Changed from auto to 120px */
  animation: slideInFromLeft 0.7s ease-out forwards;
  transition: transform 0.2s ease-in-out;
}

.page-header img:hover {
  transform: scale(1.05);
}

.page-header h1 {
  font-size: 1.75rem;
  font-family: 'Poppins', 'Inter', sans-serif;
  animation: fadeIn 0.7s ease-out 0.3s forwards;
  margin: 0;
  margin-left: 2rem;
  color: #ffffff;
}

    /* Adjust alignment when body needs to scroll */
    body.is-scrollable {
      align-items: center; /* Preserve horizontal centering on scroll */
    }

    /* Default dark text color for card elements */
    .card p,
    .card label,
    .card h1,
    .card h2,
    .card h3,
    .card h4,
    .card h5,
    .card li,
    .card .form-label { /* Added .form-label for Bootstrap forms */
        color: #333333;
    }


    /* Background behind the particle canvas */
    #particles-js-bg {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: -2; /* Behind particles-js canvas */
      background-size: cover;
    }

    .card {
      max-width: 800px;
      width: 100%;
      background-color: rgba(255, 255, 255, 0.1); /* Adjusted opacity */
      backdrop-filter: blur(20px); /* Increased blur */
      -webkit-backdrop-filter: blur(20px); /* For Safari */
      border: 1px solid rgba(209, 213, 219, 0.3);
      z-index: 1; /* Ensure card is above background elements */
      animation: cardFadeIn 0.8s ease-out forwards;
      opacity: 0; /* Start hidden for fade-in */
      transform-style: preserve-3d; /* For vanilla-tilt.js */
    }

    @keyframes cardFadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }


    /* Neumorphic Button Styling & Ripple Effect */
    .btn-neumorphic {
      border-radius: 20px !important; /* Softer corners, !important to override Bootstrap if needed */
      background: rgba(230, 230, 230, 0.25) !important; /* Slightly darker background */
      padding: 12px 20px !important;
      font-weight: 600 !important;
      transition: all 0.15s ease-in-out !important;
      border: 1px solid rgba(0, 0, 0, 0.1) !important; /* Subtle border */
      box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.2), -4px -4px 8px rgba(255, 255, 255, 0.05) !important;
      position: relative !important; /* For ripple */
      overflow: hidden !important; /* To contain ripple */
      color: #333333 !important; /* Default dark text color for neumorphic buttons */
      text-shadow: none; /* Remove text shadow if switching to dark text */
    }

    .btn-neumorphic:hover {
      box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2), -2px -2px 5px rgba(255, 255, 255, 0.05) !important;
      transform: translateY(-1px) !important; /* Subtle lift */
    }

    .btn-neumorphic:active {
      box-shadow: inset 4px 4px 8px rgba(0, 0, 0, 0.2), inset -4px -4px 8px rgba(255, 255, 255, 0.05) !important;
      transform: translateY(1px) !important; /* Press in */
    }

    /* Specific colors for icon and text if needed, but keeping text white by default for this bg */
    #refresh.btn-neumorphic { /* color: #6c757d !important; */ }

    /* Make icons slightly more prominent on neumorphic buttons */
    .btn-neumorphic i {
      filter: brightness(1.2);
    }

    /* Ripple Effect */
    .ripple {
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3); /* Light ripple */
      transform: scale(0);
      animation: ripple-animation 0.6s linear;
      pointer-events: none; /* So it doesn't interfere with button clicks */
    }

    @keyframes ripple-animation {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }

    /* Glowing/Pulsing Effects for Active States */
    /* Base neumorphic shadow must be repeated here */
    @keyframes glow-success {
      0%, 100% { box-shadow: 4px 4px 8px rgba(0,0,0,0.2), -4px -4px 8px rgba(255,255,255,0.05), 0 0 5px var(--success-color), 0 0 10px var(--success-color) !important; }
      50% { box-shadow: 4px 4px 8px rgba(0,0,0,0.2), -4px -4px 8px rgba(255,255,255,0.05), 0 0 15px var(--success-color), 0 0 20px var(--success-color) !important; }
    }
    .glow-success {
      animation: glow-success 1.5s infinite ease-in-out;
    }

    @keyframes glow-danger {
      0%, 100% { box-shadow: 4px 4px 8px rgba(0,0,0,0.2), -4px -4px 8px rgba(255,255,255,0.05), 0 0 5px var(--danger-color), 0 0 10px var(--danger-color) !important; }
      50% { box-shadow: 4px 4px 8px rgba(0,0,0,0.2), -4px -4px 8px rgba(255,255,255,0.05), 0 0 15px var(--danger-color), 0 0 20px var(--danger-color) !important; }
    }
    .glow-danger {
      animation: glow-danger 1.5s infinite ease-in-out;
    }

    /* Status pulse animation - existing */
    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
        opacity: 1;
      }
      50% {
        transform: scale(1.05);
        opacity: 0.7;
      }
    }

    .status-loading-pulse {
      animation: pulse 1.5s infinite ease-in-out;
    }

    #status {
      padding: 0.35em 0.65em; /* For badge-like appearance */
      vertical-align: middle; /* Align with icon */
    }

    /* Accordion header hover effects */
    .accordion-button {
      transition: background-color 0.2s ease-out;
    }
    .accordion-button:hover {
      background-color: rgba(0,0,0,0.03); /* Subtle darken */
    }

    /* Fade-in animation for accordion body */
    @keyframes fadeIn { /* This one already exists, ensure it's suitable or adjust if needed */
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideInFromLeft {
      from {
        transform: translateX(-50px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes slideDown {
      from {
        transform: translateY(-20px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .fade-in-content {
      animation: fadeIn 0.5s ease-out forwards;
    }

    /* Floating Action Button (FAB) */
    .fab {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 56px;
      height: 56px;
      background-color: #0d6efd; /* Bootstrap primary blue */
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      text-decoration: none;
      z-index: 1050;
      transition: background-color 0.2s ease-out, box-shadow 0.2s ease-out;
    }

/* --------------- NEW UI SECTIONS STYLING --------------- */

/* General Card Styling for new sections */
/* Ensure existing .card styling applies, add margin if needed */
.container > .card { /* Target direct children cards of the main container */
    margin-bottom: 1.5rem; /* Add space between cards */
}
.container > .card:last-child {
    margin-bottom: 0; /* No margin for the last card */
}

/* List Styling */
#recipients-list .list-group-item,
#products-list .list-group-item,
#subscription-product-list .list-group-item {
    padding: 0.75rem 1.25rem;
    margin-bottom: 0.5rem; /* Space between items */
    border: 1px solid rgba(255, 255, 255, 0.125); /* Subtle border */
    background-color: rgba(255, 255, 255, 0.05); /* Slightly different background for list items */
    transition: background-color 0.15s ease-in-out;
}

#recipients-list .list-group-item:hover,
#products-list .list-group-item:hover,
#subscription-product-list .list-group-item:hover:not(.form-check) { /* Don't highlight checkbox items on hover quite as much */
    background-color: rgba(255, 255, 255, 0.1);
}

/* Align buttons in list items */
#recipients-list .list-group-item .btn,
#products-list .list-group-item .btn {
    margin-left: 0.5rem; /* Space between buttons or text and buttons */
}

#recipients-list .list-group-item span[title]:hover {
    text-decoration: underline;
    cursor: pointer;
}


/* Form Styling */
#recipient-form .form-control,
#product-form .form-control {
    background-color: rgba(255, 255, 255, 0.2); /* Lighter inputs */
    color: #333333; /* Dark text for inputs */
    border: 1px solid rgba(255, 255, 255, 0.3);
}
#recipient-form .form-control::placeholder,
#product-form .form-control::placeholder {
    color: rgba(0, 0, 0, 0.5); /* Darker placeholder text */
}
#recipient-form .btn,
#product-form .btn {
    /* Using btn-neumorphic already, so specific overrides if needed */
}


/* Subscription Section Styling */
#recipient-subscriptions-section {
    padding: 1rem;
    background-color: rgba(0, 0, 0, 0.1); /* Slightly differentiate background */
    border-radius: 0.25rem; /* Match Bootstrap card/list group item radius */
    margin-top: 1.5rem; /* Space above this section */
}

#recipient-subscriptions-section h4 {
    margin-bottom: 1rem;
    color: #333333; /* Dark text for title */
}
#recipient-subscriptions-section #selected-recipient-email{
    font-weight: bold;
    color: #89f7fe; /* Highlight email */
}


#subscription-product-list .form-check {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
}

#subscription-product-list .form-check-label {
    margin-left: 0.5rem; /* Space between checkbox and label */
    color: #333333; /* Dark text for product names in subscription list */
}
#subscriptions-ui .list-wrapper {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

#subscriptions-ui .collapse-toggle {
  font-weight: 700;
  display: inline-flex;
  align-items: center;
  margin-right: 0.25rem;
}

#subscriptions-ui .collapse-toggle svg {
  width: 2em;
  height: 2em;
  stroke-width: 3;
  transition: transform 0.2s ease;
}

#subscriptions-ui .collapse-toggle.collapsed svg {
  transform: rotate(-90deg);
}

@media (max-width: 767.98px) {
  #subscriptions-ui .list-wrapper {
    max-height: none;
    overflow-y: visible;
  }
}
#subscription-product-list .form-check-input {
    /* border-color: rgba(255,255,255,0.5); */ /* Conflicting border, handled by more specific rule */
}
/*
#subscription-product-list .form-check-input:checked {
    background-color: var(--success-color);
    border-color: var(--success-color);
}
*/


/* Ensure buttons with icons are aligned */
.btn .lucide {
    vertical-align: text-bottom; /* Align icons better with button text */
    margin-right: 0.25rem; /* Small space between icon and text */
}

/* Responsive adjustments: Bootstrap handles most of this.
   These are just minor tweaks if needed. */
@media (max-width: 768px) {
    .card {
        margin-left: 15px;
        margin-right: 15px;
    }
    .container > .card { /* Ensure margins are consistent on smaller screens */
        margin-left: 0;
        margin-right: 0;
    }
}

/* Additional Responsive Styles for Mobile Friendliness */

@media (max-width: 768px) {
  .card h1, .card .h1 { font-size: 1.75rem; }
  .card h2, .card .h2 { font-size: 1.5rem; }
  .card h3, .card .h3 { font-size: 1.3rem; }
  .card h4, .card .h4 { font-size: 1.15rem; }
  .card h5, .card .h5 { font-size: 1.1rem; }

  /* Adjust body font size if overall smaller text is desired */
  /* body { font-size: 0.95rem; } */
}

@media (max-width: 576px) {
  /* Page Header Adjustments for Small Screens */
  .page-header {
    padding: 0.75rem 0;
    position: sticky;
    top: 0;
    z-index: 1020;
  }
  .page-header h1 {
    font-size: 1.25rem;
    margin-left: 1rem;
  }

  /* Welcome Message Adjustments for Small Screens */
  #welcome-msg {
    margin-top: 1rem;
    margin-left: 1rem;
  }
  #welcome-msg.initial {
    font-size: 1.5rem; /* Original was 1.8rem, adjusted from plan to be less drastic */
  }
  #welcome-msg.shrunk {
    font-size: 1.2rem; /* Original was 1.5rem, adjusted from plan to be less drastic */
  }

  /* Original Card Header Adjustments */
  .card h1, .card .h1 { font-size: 1.5rem; } /* This might conflict if .page-header h1 is inside a .card, but page-header is not in a card */
  .card h2, .card .h2 { font-size: 1.25rem; }
  .card h3, .card .h3 { font-size: 1.15rem; }
  .card h4, .card .h4 { font-size: 1.05rem; }
  .card h5, .card .h5 { font-size: 1rem; }
  .card p, .card li, .card .form-label, .card .form-check-label { font-size: 0.9rem; }

  .btn, .btn-neumorphic { /* Affects all buttons including neumorphic */
    font-size: 0.9rem !important; /* Ensure override if btn-neumorphic has its own font-size */
    padding: 10px 15px !important;
  }

  #recipients-list .list-group-item .btn,
  #products-list .list-group-item .btn {
    padding: 0.3rem 0.6rem !important; /* More specific selector for padding */
    font-size: 0.8rem !important;
  }

  .btn .lucide {
     margin-right: 0.2rem; /* Reduce space slightly */
     width: 1em; /* Ensure icon scales with button font size */
     height: 1em;
  }

  .card-body {
    padding: 1rem; /* Reduce padding from Bootstrap's default 1.25rem if needed */
  }
  /* Example: Adjust container padding if global py-4 is too much, though Bootstrap's is usually fine */
  /* .container.py-4 {
    padding-top: 1rem !important;
    padding-bottom: 1rem !important;
  } */

  /* FAB adjustments for smaller screens */
  .fab {
    width: 48px;
    height: 48px;
    bottom: 15px;
    right: 15px;
  }
  .fab i, .fab svg {
    width: 20px;
    height: 20px;
  }
}

#recipient-form .input-group .form-control {
  margin-right: 0.5rem;
}

#recipient-form .input-group .btn {
  margin-left: 0;
}

@media (max-width: 420px) { /* Adjusted from 400px to give a little more room before stacking */
  #recipient-form .input-group {
    flex-direction: column;
  }
  #recipient-form .input-group .form-control {
    margin-bottom: 0.5rem;
    margin-right: 0;
    border-radius: .375rem !important; /* Bootstrap's default form-control border-radius */
    width: 100%;
  }
  #recipient-form .input-group .btn {
    width: 100%;
  }

  /* Reduce font size even further for very small devices if necessary */
  .card p, .card li, .card .form-label, .card .form-check-label { font-size: 0.85rem; }
  .btn, .btn-neumorphic {
    font-size: 0.85rem !important;
    padding: 8px 12px !important;
  }
  #recipients-list .list-group-item .btn,
  #products-list .list-group-item .btn {
    padding: 0.25rem 0.5rem !important;
    font-size: 0.75rem !important;
  }
}

#user-subscribed-list li.paused {
  opacity: 0.6;
}

#subscriptions-info-toggle {
  cursor: pointer;
}

@media (max-width: 576px) {
  .product-list-item-mobile .product-details .product-name {
    text-align: left;
    font-size: 1rem;
  }
  .product-list-item-mobile .product-details .product-url {
    text-align: left;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: block;
  }
  .product-list-item-mobile .product-controls {
    justify-content: flex-start;
    flex-wrap: nowrap;
  }
  .product-list-item-mobile .product-controls .time-slot-group {
    flex-basis: auto;
  }
  .product-list-item-mobile .product-controls .form-control-sm {
    padding: .2rem .4rem;
    font-size: 0.8em;
    min-width: 90px;
  }
  .product-list-item-mobile .product-controls .btn-icon {
    line-height: 1;
  }
  .product-list-item-mobile .product-controls .lucide-small {
    width: 16px;
    height: 16px;
  }
  .product-list-item-mobile .product-details .lucide-xs {
    width: 12px;
    height: 12px;
  }

  /* Allow long title to wrap with close button below */
  #recipient-subscriptions-title {
    flex-wrap: wrap;
  }
  #recipient-subscriptions-title #close-subscriptions-btn {
    margin-top: 0.5rem;
  }
}

/* Styling for new icon buttons in lists */

/* This rule was for the general collapse button, will be replaced by a more specific one below. */
/* .btn[data-bs-toggle="collapse"] {
  display: flex;
  justify-content: space-between;
  align-items: center;
} */

/* Collapsible Section Trigger Buttons in Management Accordion */
#managementAccordion > .btn[data-bs-toggle="collapse"] {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #e9ecef; /* Slightly darker, more like an active header */
  color: #212529; /* Standard dark text */
  border: 1px solid #ced4da; /* Slightly darker border */
  text-align: left;
  box-shadow: none !important;
  font-weight: 600; /* A bit bolder for header feel */
  width: 100%;
  padding: 0.75rem 1.25rem; /* More like card-header padding */
  border-radius: .375rem; /* Standard Bootstrap card/button radius */
  transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out;
  /* margin-bottom is handled by Bootstrap's .mb-2 class on the button in HTML */
}

#managementAccordion > .btn[data-bs-toggle="collapse"]:hover {
  background-color: #dee2e6; /* Lighten slightly on hover, or darken if preferred */
  border-color: #adb5bd;
}

#managementAccordion > .btn[data-bs-toggle="collapse"]:focus,
#managementAccordion > .btn[data-bs-toggle="collapse"].focus { /* .focus class for JS-triggered focus */
  outline: 0;
  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25); /* Standard Bootstrap focus shadow */
}


#managementAccordion > .btn[data-bs-toggle="collapse"] .lucide {
  color: #212529; /* Match text color */
  /* transition: transform 0.2s ease-in-out; -- For rotating icon, not used with data-lucide swap */
}

/* Hide H2 titles inside the collapsible cards as buttons serve as headers */
/* This rule should remain as it is */
#recipientManagementCollapse .card-body h2.text-primary,
#productManagementCollapse .card-body h2.text-primary {
  display: none;
}

.list-group-item .btn-manage-icon,
.list-group-item .btn-delete-icon {
  padding: 0.35rem 0.5rem; /* Comfortable tap target */
  line-height: 1; /* Ensure icon is centered */
  vertical-align: middle; /* Align button with other elements if needed */
}

.list-group-item .btn-manage-icon .lucide,
.list-group-item .btn-delete-icon .lucide {
  width: 1em; /* Icon size relative to button's font size */
  height: 1em;
  vertical-align: middle; /* Better icon alignment within button */
}

/* Specific color for Manage button icon (using Bootstrap's outline-primary by default now) */
/* .list-group-item .btn-manage-icon { */
  /* color: var(--bs-primary); */ /* Already handled by btn-outline-primary */
  /* border-color: var(--bs-primary); */ /* Already handled by btn-outline-primary */
/* } */
/* .list-group-item .btn-manage-icon:hover { */
  /* background-color: var(--bs-primary-bg-subtle); */ /* Bootstrap handles hover for outline buttons */
/* } */

/* Ensure delete button is styled as danger (using Bootstrap's outline-danger by default now) */
/* .list-group-item .btn-delete-icon { */
  /* color: var(--bs-danger); */ /* Already handled by btn-outline-danger */
  /* border-color: var(--bs-danger); */ /* Already handled by btn-outline-danger */
/* } */
/* .list-group-item .btn-delete-icon:hover { */
  /* background-color: var(--bs-danger-bg-subtle); */ /* Bootstrap handles hover for outline buttons */
/* } */

/* Adjust spacing between icon buttons */
.list-group-item .buttons-div .btn + .btn { /* Targets subsequent buttons within .buttons-div */
    margin-left: 0.35rem; /* Ensure spacing, me-2 is 0.5rem, this is slightly less for icon buttons */
}

/* Override default .btn .lucide margin if it's too large for icon-only buttons */
.list-group-item .btn-manage-icon .lucide,
.list-group-item .btn-delete-icon .lucide {
    margin-right: 0 !important; /* Remove margin for icon-only buttons */
}

/* Ensure .buttons-div itself is aligned correctly since list-group-item is d-flex justify-content-between */
.list-group-item > .buttons-div {
    /* align-self: center; */ /* Example: if vertical centering is needed */
    /* margin-left: auto; */ /* This would push to the far right, but justify-content-between already handles separation */
}

/* Styling for Edit Product icon button */
.list-group-item .btn-edit-icon {
  padding: 0.35rem 0.5rem;
  line-height: 1;
  /* color: var(--bs-secondary); -- Already set by btn-outline-secondary */
  /* border-color: var(--bs-secondary); -- Already set by btn-outline-secondary */
}
.list-group-item .btn-edit-icon .lucide {
  width: 1em;
  height: 1em;
  vertical-align: middle;
  margin-right: 0 !important; /* Override default if any */
}

/* Close button inside Manage Subscriptions heading */
#close-subscriptions-btn {
  padding: 0.25rem 0.5rem;
  line-height: 1;
}
#close-subscriptions-btn .lucide {
  width: 1em;
  height: 1em;
  margin-right: 0 !important;
}
/* .list-group-item .btn-edit-icon:hover { */
  /* background-color: var(--bs-gray-200); -- Bootstrap handles this for outline buttons */
/* } */

/* Styling for product URL snippet */
.list-group-item small.text-muted a {
  text-decoration: none; /* Remove underline from link snippet */
  color: inherit; /* Inherit color from .text-muted */
}
.list-group-item small.text-muted a:hover {
  text-decoration: underline;
  color: var(--bs-primary); /* Highlight link on hover */
}
.lucide-small { /* For smaller icons like external-link in text */
   width: 0.8em;
   height: 0.8em;
   margin-left: 0.2em;
   vertical-align: baseline; /* Align better with text */
}

/* Ensure modal text is dark */
.modal-content {
   color: #333333; /* Default dark text color */
}
.modal-content .form-label { /* Specifically for labels within modal */
   color: #333333;
}
/* Ensure modal inputs also have dark text if not inheriting */
.modal-content .form-control {
    color: #333333;
}
.modal-content .form-control::placeholder {
    color: rgba(0, 0, 0, 0.5); /* Darker placeholder text for modal inputs */
}

/* Scrollable Modal Body */
#subscriptionModalBody {
  max-height: 450px; /* Adjusted height slightly */
  overflow-y: auto;
}

/* Square Green Checkboxes for Subscription Modal */
#subscriptionModalBody .form-check-input[type="checkbox"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  width: 1.25em;
  height: 1.25em;
  background-color: #fff;
  border: 1px solid #adb5bd;
  border-radius: 0; /* Sharp corners */
  position: relative;
  cursor: pointer;
  vertical-align: middle; /* Helps align with label text */
  margin-right: 0.5rem; /* Space between checkbox and label, consistent with existing */
  background-image: none !important; /* Remove Bootstrap's default SVG image */
}

#subscriptionModalBody .form-check-input[type="checkbox"]:checked {
  background-color: #28a745; /* Green background */
  border-color: #28a745; /* Green border */
  background-image: none !important; /* Also for checked state */
}

#subscriptionModalBody .form-check-input[type="checkbox"]:checked::after {
  content: "";
  position: absolute;
  left: 0.35em;
  top: 0.15em;
  width: 0.4em;
  height: 0.7em;
  border: solid white;
  border-width: 0 0.15em 0.15em 0;
  transform: rotate(45deg);
}


/* Refinements for Subscription Product List Checkboxes */
/* These existing rules will apply ON TOP of the above for items within #subscription-product-list if that ID is used within the modal */
/* If #subscriptionModalBody is the parent of #subscription-product-list, the new rules are more specific for the general modal body context */
#subscription-product-list .list-group-item.form-check {
  display: flex; /* Use flexbox for alignment */
  align-items: center; /* Vertically center checkbox and label text */
  padding-left: 1rem; /* Remove default form-check padding */
}

#subscription-product-list .form-check-input {
  position: static;
  float: none;
  margin: 0; /* Removed specific margin here as it's handled by the new rule for #subscriptionModalBody .form-check-input */
  /* The align-items: center on the parent should handle most vertical alignment needs. */
}

#subscription-product-list .form-check-label {
  margin-left: 0;
}

/* Styling for settings offcanvas so it matches the blurred card look */
#settingsPane.offcanvas {
  background-color: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-left: 1px solid rgba(209, 213, 219, 0.3);
  color: #333333;
}

@media (max-width: 767.98px) {
  #settingsPane.offcanvas-end {
    width: 50vw;
  }
}

#settingsPane .offcanvas-header {
  border-bottom: 1px solid rgba(209, 213, 219, 0.3);
}

#settingsPane .offcanvas-title {
  color: #333333;
}

#settingsPane hr {
  margin: 1rem 0;
  border-color: rgba(209, 213, 219, 0.3);
}

/* Save All Subscriptions Button Styles */

/* Initial state (btn-outline-primary is the base in JS when no changes) */
#saveAllSubscriptionsBtn {
  /* Default styling will be btn btn-outline-primary assigned via JS initially */
  /* Ensure transition for smooth style changes */
  transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, color 0.15s ease-in-out, opacity 0.15s ease-in-out;
}

/* State when there are unsaved changes */
/* This class will be added via JavaScript. */
#saveAllSubscriptionsBtn.btn-unsaved-changes {
  background-color: #0d6efd; /* Bootstrap primary blue */
  border-color: #0d6efd;
  color: #fff;
}
/* Ensure hover/focus states for unsaved changes are consistent with btn-primary */
#saveAllSubscriptionsBtn.btn-unsaved-changes:hover {
    background-color: #0b5ed7;
    border-color: #0a58ca;
}
#saveAllSubscriptionsBtn.btn-unsaved-changes:focus,
#saveAllSubscriptionsBtn.btn-unsaved-changes.focus { /* .focus class for JS focus */
    background-color: #0b5ed7;
    border-color: #0a58ca;
    box-shadow: 0 0 0 0.25rem rgba(49, 132, 253, 0.5); /* Bootstrap's primary focus shadow */
}


/* Loading state (when saving) */
/* This class will be added via JavaScript. */
#saveAllSubscriptionsBtn.btn-loading {
  /* Style will be based on btn-primary (unsaved changes style) */
  background-color: #0d6efd;
  border-color: #0d6efd;
  color: #fff;
  opacity: 0.65 !important; /* Indicate disabled state, !important if other opacity rules interfere */
  cursor: not-allowed !important; /* Indicate non-interactive */
  /* Prevent hover/focus effects when loading */
  pointer-events: none;
}

/* Spinner for loading state - to be embedded in the button text by JS */
#saveAllSubscriptionsBtn .spinner-border-sm {
  margin-right: 0.5rem;
  vertical-align: text-bottom; /* Align spinner nicely with text */
}

/* Subscription Modal UI Enhancements */
#subscriptionModal .modal-content {
  /* Using existing card background with blur: rgba(255, 255, 255, 0.1) and backdrop-filter: blur(20px); */
  /* If a more opaque/distinct background is needed, it can be set here, but for theme consistency, we inherit. */
  border-radius: 0.5rem; /* Consistent with other cards, like .card */
  border: 1px solid rgba(209, 213, 219, 0.3); /* Match card border */
}

#subscriptionModal .modal-header {
  background-color: rgba(0, 0, 0, 0.03); /* Subtle header background */
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 1rem 1.5rem;
}

/* Target h5 if #subscriptionModalHeaderTitle is an h5, or just the ID */
#subscriptionModalHeaderTitle {
  font-weight: 600; /* Bolder title */
  font-size: 1.2rem; /* Adjusted size */
  color: #333; /* Ensure good contrast on the light header bg */
}

#subscriptionModal .modal-body {
  /* Existing: max-height: 450px; overflow-y: auto; */
  padding: 1rem 1.25rem; /* Standard Bootstrap modal body padding or adjust as needed */
}

/* Optional: Refined hover for list items if current is not distinct enough */
/* #subscriptionModalBody .list-group-item:hover {
  background-color: rgba(0, 0, 0, 0.04);
} */

#subscriptionModal .modal-footer {
  background-color: rgba(0, 0, 0, 0.03); /* Match header or be neutral */
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  padding: 0.75rem 1.5rem;
  display: flex;
  justify-content: flex-end; /* Align buttons to the right */
}

#subscriptionModal .modal-footer .btn + .btn { /* For spacing between buttons like "Close" and "Save All" */
  margin-left: 0.5rem;
}

/* Toast Notification Styles */

.toast-container {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1090; /* Higher than Bootstrap modal z-index (usually 1050-1060 for modal, 1070 for modal backdrop) */
  display: flex;
  flex-direction: column;
  align-items: flex-end; /* Toasts stack nicely from the right */
  width: auto; /* Allow toasts to define their own width up to max-width */
}

.toast-notification {
  background-color: #fff; /* Default background */
  color: #333;
  padding: 12px 20px;
  margin-bottom: 10px;
  border-radius: 0.375rem; /* Bootstrap's default */
  box-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.1);
  opacity: 0; /* Start hidden for fade-in */
  transform: translateX(100%); /* Start off-screen to the right for slide-in effect */
  transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out;
  min-width: 280px; /* Ensure a decent minimum width */
  max-width: 380px; /* Max width */
  /* Allow flex behavior for content inside if needed, e.g., for close button alignment */
  display: flex;
  justify-content: space-between; /* If a close button is present */
  align-items: center;
}

.toast-notification.show {
  opacity: 1;
  transform: translateX(0); /* Slide in to view */
}

/* States for different notification types */
.toast-notification.success {
  background-color: #d1e7dd; /* Bootstrap success background subtle */
  color: #0f5132; /* Bootstrap success text subtle */
  border-left: 5px solid var(--success-color); /* Accent border using our variable */
}

.toast-notification.error {
  background-color: #f8d7da; /* Bootstrap danger background subtle */
  color: #842029; /* Bootstrap danger text subtle */
  border-left: 5px solid var(--danger-color); /* Accent border using our variable */
}

.toast-notification.warning {
  background-color: #fff3cd; /* Bootstrap warning background subtle */
  color: #664d03; /* Bootstrap warning text subtle */
  border-left: 5px solid #ffc107; /* Accent border */
}

/* Optional: Close button styling if added to toast markup */
.toast-notification .btn-close-toast {
  background: none;
  border: none;
  color: inherit; /* Inherits color from parent (.success, .error, etc.) */
  /* float: right; -- No longer needed with flex */
  font-size: 1.2rem;
  font-weight: bold;
  line-height: 1;
  opacity: 0.6; /* Slightly more visible than BS default for btn-close */
  margin-left: 15px; /* Space between message and close button */
  padding: 0; /* Reset padding */
  cursor: pointer;
  text-shadow: none; /* Ensure no text shadow if parent has one */
}
.toast-notification .btn-close-toast:hover {
  opacity: 0.9;
}

/* Fun greeting styling */
#welcome-msg {
  font-weight: 700;
  transition: all 0.6s ease;
  margin-top: 1.5rem; /* Added margin-top */
  margin-left: 2rem;
}

#welcome-msg.initial {
  font-size: 2.5rem;
  text-align: center;
  animation: welcomeBounce 1.2s ease;
}

#welcome-msg.shrunk {
  font-size: 1.75rem;
  text-align: start;
}

@media (max-width: 576px) {
  /* #welcome-msg.initial adjustment is now above */
  /* #welcome-msg.shrunk adjustment is now above */
}

@keyframes welcomeBounce {
  0% { opacity: 0; transform: scale(0.9); }
  60% { opacity: 1; transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* Used by user-subscriptions.js to hide non-matching products during search */
.product-item-hidden {
  display: none !important;
}

/* Overlay shown during async operations */
.loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2000;
}


/* --------------- NEW UI SECTIONS STYLING --------------- */

/* General Card Styling for new sections */
/* Ensure existing .card styling applies, add margin if needed */
.container > .card { /* Target direct children cards of the main container */
    margin-bottom: 1.5rem; /* Add space between cards */
}
.container > .card:last-child {
    margin-bottom: 0; /* No margin for the last card */
}

/* List Styling */
#recipients-list .list-group-item,
#products-list .list-group-item,
#subscription-product-list .list-group-item {
    padding: 0.75rem 1.25rem;
    margin-bottom: 0.5rem; /* Space between items */
    border: 1px solid rgba(255, 255, 255, 0.125); /* Subtle border */
    background-color: rgba(255, 255, 255, 0.05); /* Slightly different background for list items */
    transition: background-color 0.15s ease-in-out;
}

#recipients-list .list-group-item:hover,
#products-list .list-group-item:hover,
#subscription-product-list .list-group-item:hover:not(.form-check) { /* Don't highlight checkbox items on hover quite as much */
    background-color: rgba(255, 255, 255, 0.1);
}

/* Align buttons in list items */
#recipients-list .list-group-item .btn,
#products-list .list-group-item .btn {
    margin-left: 0.5rem; /* Space between buttons or text and buttons */
}

#recipients-list .list-group-item span[title]:hover {
    text-decoration: underline;
    cursor: pointer;
}


/* Form Styling */
#recipient-form .form-control,
#product-form .form-control {
    background-color: rgba(255, 255, 255, 0.2); /* Lighter inputs */
    color: #333333; /* Dark text for inputs */
    border: 1px solid rgba(255, 255, 255, 0.3);
}
#recipient-form .form-control::placeholder,
#product-form .form-control::placeholder {
    color: rgba(0, 0, 0, 0.5); /* Darker placeholder text */
}
#recipient-form .btn,
#product-form .btn {
    /* Using btn-neumorphic already, so specific overrides if needed */
}


/* Subscription Section Styling */
#recipient-subscriptions-section {
    padding: 1rem;
    background-color: rgba(0, 0, 0, 0.1); /* Slightly differentiate background */
    border-radius: 0.25rem; /* Match Bootstrap card/list group item radius */
    margin-top: 1.5rem; /* Space above this section */
}

#recipient-subscriptions-section h4 {
    margin-bottom: 1rem;
    color: #333333; /* Dark text for title */
}
#recipient-subscriptions-section #selected-recipient-email{
    font-weight: bold;
    color: #89f7fe; /* Highlight email */
}


#subscription-product-list .form-check {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
}

#subscription-product-list .form-check-label {
    margin-left: 0.5rem; /* Space between checkbox and label */
    color: #333333; /* Dark text for product names in subscription list */
}
#subscriptions-ui .list-wrapper {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

#subscriptions-ui .collapse-toggle {
  font-weight: 700;
  display: inline-flex;
  align-items: center;
  margin-right: 0.25rem;
}

#subscriptions-ui .collapse-toggle svg {
  width: 2em;
  height: 2em;
  stroke-width: 3;
  transition: transform 0.2s ease;
}

#subscriptions-ui .collapse-toggle.collapsed svg {
  transform: rotate(-90deg);
}

@media (max-width: 767.98px) {
  #subscriptions-ui .list-wrapper {
    max-height: none;
    overflow-y: visible;
  }
}
#subscription-product-list .form-check-input {
    /* border-color: rgba(255,255,255,0.5); */ /* Conflicting border, handled by more specific rule */
}
/*
#subscription-product-list .form-check-input:checked {
    background-color: var(--success-color);
    border-color: var(--success-color);
}
*/


/* Ensure buttons with icons are aligned */
.btn .lucide {
    vertical-align: text-bottom; /* Align icons better with button text */
    margin-right: 0.25rem; /* Small space between icon and text */
}

/* Responsive adjustments: Bootstrap handles most of this.
   These are just minor tweaks if needed. */
@media (max-width: 768px) {
    .card {
        margin-left: 15px;
        margin-right: 15px;
    }
    .container > .card { /* Ensure margins are consistent on smaller screens */
        margin-left: 0;
        margin-right: 0;
    }
}

/* Additional Responsive Styles for Mobile Friendliness */

@media (max-width: 768px) {
  .card h1, .card .h1 { font-size: 1.75rem; }
  .card h2, .card .h2 { font-size: 1.5rem; }
  .card h3, .card .h3 { font-size: 1.3rem; }
  .card h4, .card .h4 { font-size: 1.15rem; }
  .card h5, .card .h5 { font-size: 1.1rem; }

  /* Adjust body font size if overall smaller text is desired */
  /* body { font-size: 0.95rem; } */
}

@media (max-width: 576px) {
  .card h1, .card .h1 { font-size: 1.5rem; }
  .card h2, .card .h2 { font-size: 1.25rem; }
  .card h3, .card .h3 { font-size: 1.15rem; }
  .card h4, .card .h4 { font-size: 1.05rem; }
  .card h5, .card .h5 { font-size: 1rem; }
  .card p, .card li, .card .form-label, .card .form-check-label { font-size: 0.9rem; }

  .btn, .btn-neumorphic { /* Affects all buttons including neumorphic */
    font-size: 0.9rem !important; /* Ensure override if btn-neumorphic has its own font-size */
    padding: 10px 15px !important;
  }

  #recipients-list .list-group-item .btn,
  #products-list .list-group-item .btn {
    padding: 0.3rem 0.6rem !important; /* More specific selector for padding */
    font-size: 0.8rem !important;
  }

  .btn .lucide {
     margin-right: 0.2rem; /* Reduce space slightly */
     width: 1em; /* Ensure icon scales with button font size */
     height: 1em;
  }

  .card-body {
    padding: 1rem; /* Reduce padding from Bootstrap's default 1.25rem if needed */
  }
  /* Example: Adjust container padding if global py-4 is too much, though Bootstrap's is usually fine */
  /* .container.py-4 {
    padding-top: 1rem !important;
    padding-bottom: 1rem !important;
  } */

  /* FAB adjustments for smaller screens */
  .fab {
    width: 48px;
    height: 48px;
    bottom: 15px;
    right: 15px;
  }
  .fab i, .fab svg {
    width: 20px;
    height: 20px;
  }
}

#recipient-form .input-group .form-control {
  margin-right: 0.5rem;
}

#recipient-form .input-group .btn {
  margin-left: 0;
}

@media (max-width: 420px) { /* Adjusted from 400px to give a little more room before stacking */
  #recipient-form .input-group {
    flex-direction: column;
  }
  #recipient-form .input-group .form-control {
    margin-bottom: 0.5rem;
    margin-right: 0;
    border-radius: .375rem !important; /* Bootstrap's default form-control border-radius */
    width: 100%;
  }
  #recipient-form .input-group .btn {
    width: 100%;
  }

  /* Reduce font size even further for very small devices if necessary */
  .card p, .card li, .card .form-label, .card .form-check-label { font-size: 0.85rem; }
  .btn, .btn-neumorphic {
    font-size: 0.85rem !important;
    padding: 8px 12px !important;
  }
  #recipients-list .list-group-item .btn,
  #products-list .list-group-item .btn {
    padding: 0.25rem 0.5rem !important;
    font-size: 0.75rem !important;
  }
}

#user-subscribed-list li.paused {
  opacity: 0.6;
}

#subscriptions-info-toggle {
  cursor: pointer;
}

@media (max-width: 576px) {
  .product-list-item-mobile .product-details .product-name {
    text-align: left;
    font-size: 1rem;
  }
  .product-list-item-mobile .product-details .product-url {
    text-align: left;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: block;
  }
  .product-list-item-mobile .product-controls {
    justify-content: flex-start;
    flex-wrap: nowrap;
  }
  .product-list-item-mobile .product-controls .time-slot-group {
    flex-basis: auto;
  }
  .product-list-item-mobile .product-controls .form-control-sm {
    padding: .2rem .4rem;
    font-size: 0.8em;
    min-width: 90px;
  }
  .product-list-item-mobile .product-controls .btn-icon {
    line-height: 1;
  }
  .product-list-item-mobile .product-controls .lucide-small {
    width: 16px;
    height: 16px;
  }
  .product-list-item-mobile .product-details .lucide-xs {
    width: 12px;
    height: 12px;
  }

  /* Allow long title to wrap with close button below */
  #recipient-subscriptions-title {
    flex-wrap: wrap;
  }
  #recipient-subscriptions-title #close-subscriptions-btn {
    margin-top: 0.5rem;
  }
}

/* Styling for new icon buttons in lists */

/* This rule was for the general collapse button, will be replaced by a more specific one below. */
/* .btn[data-bs-toggle="collapse"] {
  display: flex;
  justify-content: space-between;
  align-items: center;
} */

/* Collapsible Section Trigger Buttons in Management Accordion */
#managementAccordion > .btn[data-bs-toggle="collapse"] {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #e9ecef; /* Slightly darker, more like an active header */
  color: #212529; /* Standard dark text */
  border: 1px solid #ced4da; /* Slightly darker border */
  text-align: left;
  box-shadow: none !important;
  font-weight: 600; /* A bit bolder for header feel */
  width: 100%;
  padding: 0.75rem 1.25rem; /* More like card-header padding */
  border-radius: .375rem; /* Standard Bootstrap card/button radius */
  transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out;
  /* margin-bottom is handled by Bootstrap's .mb-2 class on the button in HTML */
}

#managementAccordion > .btn[data-bs-toggle="collapse"]:hover {
  background-color: #dee2e6; /* Lighten slightly on hover, or darken if preferred */
  border-color: #adb5bd;
}

#managementAccordion > .btn[data-bs-toggle="collapse"]:focus,
#managementAccordion > .btn[data-bs-toggle="collapse"].focus { /* .focus class for JS-triggered focus */
  outline: 0;
  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25); /* Standard Bootstrap focus shadow */
}


#managementAccordion > .btn[data-bs-toggle="collapse"] .lucide {
  color: #212529; /* Match text color */
  /* transition: transform 0.2s ease-in-out; -- For rotating icon, not used with data-lucide swap */
}

/* Hide H2 titles inside the collapsible cards as buttons serve as headers */
/* This rule should remain as it is */
#recipientManagementCollapse .card-body h2.text-primary,
#productManagementCollapse .card-body h2.text-primary {
  display: none;
}

.list-group-item .btn-manage-icon,
.list-group-item .btn-delete-icon {
  padding: 0.35rem 0.5rem; /* Comfortable tap target */
  line-height: 1; /* Ensure icon is centered */
  vertical-align: middle; /* Align button with other elements if needed */
}

.list-group-item .btn-manage-icon .lucide,
.list-group-item .btn-delete-icon .lucide {
  width: 1em; /* Icon size relative to button's font size */
  height: 1em;
  vertical-align: middle; /* Better icon alignment within button */
}

/* Specific color for Manage button icon (using Bootstrap's outline-primary by default now) */
/* .list-group-item .btn-manage-icon { */
  /* color: var(--bs-primary); */ /* Already handled by btn-outline-primary */
  /* border-color: var(--bs-primary); */ /* Already handled by btn-outline-primary */
/* } */
/* .list-group-item .btn-manage-icon:hover { */
  /* background-color: var(--bs-primary-bg-subtle); */ /* Bootstrap handles hover for outline buttons */
/* } */

/* Ensure delete button is styled as danger (using Bootstrap's outline-danger by default now) */
/* .list-group-item .btn-delete-icon { */
  /* color: var(--bs-danger); */ /* Already handled by btn-outline-danger */
  /* border-color: var(--bs-danger); */ /* Already handled by btn-outline-danger */
/* } */
/* .list-group-item .btn-delete-icon:hover { */
  /* background-color: var(--bs-danger-bg-subtle); */ /* Bootstrap handles hover for outline buttons */
/* } */

/* Adjust spacing between icon buttons */
.list-group-item .buttons-div .btn + .btn { /* Targets subsequent buttons within .buttons-div */
    margin-left: 0.35rem; /* Ensure spacing, me-2 is 0.5rem, this is slightly less for icon buttons */
}

/* Override default .btn .lucide margin if it's too large for icon-only buttons */
.list-group-item .btn-manage-icon .lucide,
.list-group-item .btn-delete-icon .lucide {
    margin-right: 0 !important; /* Remove margin for icon-only buttons */
}

/* Ensure .buttons-div itself is aligned correctly since list-group-item is d-flex justify-content-between */
.list-group-item > .buttons-div {
    /* align-self: center; */ /* Example: if vertical centering is needed */
    /* margin-left: auto; */ /* This would push to the far right, but justify-content-between already handles separation */
}

/* Styling for Edit Product icon button */
.list-group-item .btn-edit-icon {
  padding: 0.35rem 0.5rem;
  line-height: 1;
  /* color: var(--bs-secondary); -- Already set by btn-outline-secondary */
  /* border-color: var(--bs-secondary); -- Already set by btn-outline-secondary */
}
.list-group-item .btn-edit-icon .lucide {
  width: 1em;
  height: 1em;
  vertical-align: middle;
  margin-right: 0 !important; /* Override default if any */
}

/* Close button inside Manage Subscriptions heading */
#close-subscriptions-btn {
  padding: 0.25rem 0.5rem;
  line-height: 1;
}
#close-subscriptions-btn .lucide {
  width: 1em;
  height: 1em;
  margin-right: 0 !important;
}
/* .list-group-item .btn-edit-icon:hover { */
  /* background-color: var(--bs-gray-200); -- Bootstrap handles this for outline buttons */
/* } */

/* Styling for product URL snippet */
.list-group-item small.text-muted a {
  text-decoration: none; /* Remove underline from link snippet */
  color: inherit; /* Inherit color from .text-muted */
}
.list-group-item small.text-muted a:hover {
  text-decoration: underline;
  color: var(--bs-primary); /* Highlight link on hover */
}
.lucide-small { /* For smaller icons like external-link in text */
   width: 0.8em;
   height: 0.8em;
   margin-left: 0.2em;
   vertical-align: baseline; /* Align better with text */
}

/* Ensure modal text is dark */
.modal-content {
   color: #333333; /* Default dark text color */
}
.modal-content .form-label { /* Specifically for labels within modal */
   color: #333333;
}
/* Ensure modal inputs also have dark text if not inheriting */
.modal-content .form-control {
    color: #333333;
}
.modal-content .form-control::placeholder {
    color: rgba(0, 0, 0, 0.5); /* Darker placeholder text for modal inputs */
}

/* Scrollable Modal Body */
#subscriptionModalBody {
  max-height: 450px; /* Adjusted height slightly */
  overflow-y: auto;
}

/* Square Green Checkboxes for Subscription Modal */
#subscriptionModalBody .form-check-input[type="checkbox"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  width: 1.25em;
  height: 1.25em;
  background-color: #fff;
  border: 1px solid #adb5bd;
  border-radius: 0; /* Sharp corners */
  position: relative;
  cursor: pointer;
  vertical-align: middle; /* Helps align with label text */
  margin-right: 0.5rem; /* Space between checkbox and label, consistent with existing */
  background-image: none !important; /* Remove Bootstrap's default SVG image */
}

#subscriptionModalBody .form-check-input[type="checkbox"]:checked {
  background-color: #28a745; /* Green background */
  border-color: #28a745; /* Green border */
  background-image: none !important; /* Also for checked state */
}

#subscriptionModalBody .form-check-input[type="checkbox"]:checked::after {
  content: "";
  position: absolute;
  left: 0.35em;
  top: 0.15em;
  width: 0.4em;
  height: 0.7em;
  border: solid white;
  border-width: 0 0.15em 0.15em 0;
  transform: rotate(45deg);
}


/* Refinements for Subscription Product List Checkboxes */
/* These existing rules will apply ON TOP of the above for items within #subscription-product-list if that ID is used within the modal */
/* If #subscriptionModalBody is the parent of #subscription-product-list, the new rules are more specific for the general modal body context */
#subscription-product-list .list-group-item.form-check {
  display: flex; /* Use flexbox for alignment */
  align-items: center; /* Vertically center checkbox and label text */
  padding-left: 1rem; /* Remove default form-check padding */
}

#subscription-product-list .form-check-input {
  position: static;
  float: none;
  margin: 0; /* Removed specific margin here as it's handled by the new rule for #subscriptionModalBody .form-check-input */
  /* The align-items: center on the parent should handle most vertical alignment needs. */
}

#subscription-product-list .form-check-label {
  margin-left: 0;
}

/* Styling for settings offcanvas so it matches the blurred card look */
#settingsPane.offcanvas {
  background-color: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-left: 1px solid rgba(209, 213, 219, 0.3);
  color: #333333;
}

@media (max-width: 767.98px) {
  #settingsPane.offcanvas-end {
    width: 50vw;
  }
}

#settingsPane .offcanvas-header {
  border-bottom: 1px solid rgba(209, 213, 219, 0.3);
}

#settingsPane .offcanvas-title {
  color: #333333;
}

#settingsPane hr {
  margin: 1rem 0;
  border-color: rgba(209, 213, 219, 0.3);
}

/* Save All Subscriptions Button Styles */

/* Initial state (btn-outline-primary is the base in JS when no changes) */
#saveAllSubscriptionsBtn {
  /* Default styling will be btn btn-outline-primary assigned via JS initially */
  /* Ensure transition for smooth style changes */
  transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, color 0.15s ease-in-out, opacity 0.15s ease-in-out;
}

/* State when there are unsaved changes */
/* This class will be added via JavaScript. */
#saveAllSubscriptionsBtn.btn-unsaved-changes {
  background-color: #0d6efd; /* Bootstrap primary blue */
  border-color: #0d6efd;
  color: #fff;
}
/* Ensure hover/focus states for unsaved changes are consistent with btn-primary */
#saveAllSubscriptionsBtn.btn-unsaved-changes:hover {
    background-color: #0b5ed7;
    border-color: #0a58ca;
}
#saveAllSubscriptionsBtn.btn-unsaved-changes:focus,
#saveAllSubscriptionsBtn.btn-unsaved-changes.focus { /* .focus class for JS focus */
    background-color: #0b5ed7;
    border-color: #0a58ca;
    box-shadow: 0 0 0 0.25rem rgba(49, 132, 253, 0.5); /* Bootstrap's primary focus shadow */
}


/* Loading state (when saving) */
/* This class will be added via JavaScript. */
#saveAllSubscriptionsBtn.btn-loading {
  /* Style will be based on btn-primary (unsaved changes style) */
  background-color: #0d6efd;
  border-color: #0d6efd;
  color: #fff;
  opacity: 0.65 !important; /* Indicate disabled state, !important if other opacity rules interfere */
  cursor: not-allowed !important; /* Indicate non-interactive */
  /* Prevent hover/focus effects when loading */
  pointer-events: none;
}

/* Spinner for loading state - to be embedded in the button text by JS */
#saveAllSubscriptionsBtn .spinner-border-sm {
  margin-right: 0.5rem;
  vertical-align: text-bottom; /* Align spinner nicely with text */
}

/* Subscription Modal UI Enhancements */
#subscriptionModal .modal-content {
  /* Using existing card background with blur: rgba(255, 255, 255, 0.1) and backdrop-filter: blur(20px); */
  /* If a more opaque/distinct background is needed, it can be set here, but for theme consistency, we inherit. */
  border-radius: 0.5rem; /* Consistent with other cards, like .card */
  border: 1px solid rgba(209, 213, 219, 0.3); /* Match card border */
}

#subscriptionModal .modal-header {
  background-color: rgba(0, 0, 0, 0.03); /* Subtle header background */
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 1rem 1.5rem;
}

/* Target h5 if #subscriptionModalHeaderTitle is an h5, or just the ID */
#subscriptionModalHeaderTitle {
  font-weight: 600; /* Bolder title */
  font-size: 1.2rem; /* Adjusted size */
  color: #333; /* Ensure good contrast on the light header bg */
}

#subscriptionModal .modal-body {
  /* Existing: max-height: 450px; overflow-y: auto; */
  padding: 1rem 1.25rem; /* Standard Bootstrap modal body padding or adjust as needed */
}

/* Optional: Refined hover for list items if current is not distinct enough */
/* #subscriptionModalBody .list-group-item:hover {
  background-color: rgba(0, 0, 0, 0.04);
} */

#subscriptionModal .modal-footer {
  background-color: rgba(0, 0, 0, 0.03); /* Match header or be neutral */
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  padding: 0.75rem 1.5rem;
  display: flex;
  justify-content: flex-end; /* Align buttons to the right */
}

#subscriptionModal .modal-footer .btn + .btn { /* For spacing between buttons like "Close" and "Save All" */
  margin-left: 0.5rem;
}

/* Toast Notification Styles */

.toast-container {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1090; /* Higher than Bootstrap modal z-index (usually 1050-1060 for modal, 1070 for modal backdrop) */
  display: flex;
  flex-direction: column;
  align-items: flex-end; /* Toasts stack nicely from the right */
  width: auto; /* Allow toasts to define their own width up to max-width */
}

.toast-notification {
  background-color: #fff; /* Default background */
  color: #333;
  padding: 12px 20px;
  margin-bottom: 10px;
  border-radius: 0.375rem; /* Bootstrap's default */
  box-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.1);
  opacity: 0; /* Start hidden for fade-in */
  transform: translateX(100%); /* Start off-screen to the right for slide-in effect */
  transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out;
  min-width: 280px; /* Ensure a decent minimum width */
  max-width: 380px; /* Max width */
  /* Allow flex behavior for content inside if needed, e.g., for close button alignment */
  display: flex;
  justify-content: space-between; /* If a close button is present */
  align-items: center;
}

.toast-notification.show {
  opacity: 1;
  transform: translateX(0); /* Slide in to view */
}

/* States for different notification types */
.toast-notification.success {
  background-color: #d1e7dd; /* Bootstrap success background subtle */
  color: #0f5132; /* Bootstrap success text subtle */
  border-left: 5px solid var(--success-color); /* Accent border using our variable */
}

.toast-notification.error {
  background-color: #f8d7da; /* Bootstrap danger background subtle */
  color: #842029; /* Bootstrap danger text subtle */
  border-left: 5px solid var(--danger-color); /* Accent border using our variable */
}

.toast-notification.warning {
  background-color: #fff3cd; /* Bootstrap warning background subtle */
  color: #664d03; /* Bootstrap warning text subtle */
  border-left: 5px solid #ffc107; /* Accent border */
}

/* Optional: Close button styling if added to toast markup */
.toast-notification .btn-close-toast {
  background: none;
  border: none;
  color: inherit; /* Inherits color from parent (.success, .error, etc.) */
  /* float: right; -- No longer needed with flex */
  font-size: 1.2rem;
  font-weight: bold;
  line-height: 1;
  opacity: 0.6; /* Slightly more visible than BS default for btn-close */
  margin-left: 15px; /* Space between message and close button */
  padding: 0; /* Reset padding */
  cursor: pointer;
  text-shadow: none; /* Ensure no text shadow if parent has one */
}
.toast-notification .btn-close-toast:hover {
  opacity: 0.9;
}

/* Fun greeting styling */
#welcome-msg {
  font-weight: 700;
  transition: all 0.6s ease;
  margin-left: 2rem;
}

#welcome-msg.initial {
  font-size: 2.5rem;
  text-align: center;
  animation: welcomeBounce 1.2s ease;
}

#welcome-msg.shrunk {
  font-size: 1.75rem;
  text-align: start;
}

@media (max-width: 576px) {
  #welcome-msg {
    margin-left: 1rem;
  }
  #welcome-msg.initial {
    font-size: 1.8rem;
    word-break: break-word;
  }
  #welcome-msg.shrunk {
    font-size: 1.5rem;
  }
}

@keyframes welcomeBounce {
  0% { opacity: 0; transform: scale(0.9); }
  60% { opacity: 1; transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* Used by user-subscriptions.js to hide non-matching products during search */
.product-item-hidden {
  display: none !important;
}

/* Overlay shown during async operations */
.loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2000;
}
    .fab:hover {
      background-color: #0b5ed7; /* Darker shade of primary blue */
      box-shadow: 0 6px 12px rgba(0,0,0,0.3);
    }
    .fab i,
    .fab svg {
      width: 24px;
      height: 24px;
      text-shadow: 0 0 3px rgba(0, 0, 0, 0.3), 0 0 1px rgba(0, 0, 0, 0.5);
    }
    .card h1.text-primary {
        text-shadow: 0 0 4px rgba(0, 0, 0, 0.2); /* Subtle dark shadow for primary text */
    }
    /* Removed text-shadow for general paragraph text as default text color is now dark */
    /* .card p {
        text-shadow: 0 0 2px rgba(0,0,0,0.1);
    } */


    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .spin-icon {
      animation: spin 1s linear infinite;
      display: inline-block; /* Ensures transform is applied correctly */
    }

    .skeleton-loader {
      background: linear-gradient(90deg, rgba(255,255,255,0.05) 25%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.05) 75%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite linear;
      border-radius: .25rem; /* Standard Bootstrap border-radius */
      height: 1em; /* Default height, can be overridden */
    }
    .skeleton-loader.skeleton-text { /* For text lines */
      width: 75%;
      margin-bottom: .5rem;
    }
    .skeleton-loader.skeleton-text-full { /* For full width text lines */
      width: 100%;
      margin-bottom: .5rem;
    }
    .skeleton-loader.skeleton-badge { /* For badge like elements */
      width: 30%;
      height: 1.5em; /* Taller for badge */
    }
    .accordion-button.skeleton-item .skeleton-loader {
       margin-right: 1rem; /* Space between icon and text */
    }
     .accordion-button.skeleton-item .skeleton-icon-placeholder {
      width: 24px; /* Lucide icon size */
      height: 24px;
      margin-right: 0.5rem; /* Bootstrap's default me-2 for icons */
    }


    @keyframes shimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    /* Carousel customizations */
    .carousel-control-prev-icon,
    .carousel-control-next-icon {
      width: 2.5rem;
      height: 2.5rem;
      background-size: 100% 100%;
      background-repeat: no-repeat;
    }
    .carousel-control-prev-icon {
      background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D'http://www.w3.org/2000/svg'%20fill%3D'none'%20stroke%3D'black'%20stroke-width%3D'3'%20viewBox%3D'0%200%2016%2016'%3E%3Cpath%20d%3D'M11%201%203%208l8%207'/%3E%3C/svg%3E");
    }
    .carousel-control-next-icon {
      background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D'http://www.w3.org/2000/svg'%20fill%3D'none'%20stroke%3D'black'%20stroke-width%3D'3'%20viewBox%3D'0%200%2016%2016'%3E%3Cpath%20d%3D'M5%201l8%207-8%207'/%3E%3C/svg%3E");
    }
    .carousel-counter {
      position: absolute;
      right: 0.75rem;
      bottom: 0.75rem;
      background: rgba(0,0,0,0.6);
      color: #fff;
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
      font-size: 0.8rem;
    }

/* --------------- NEW UI SECTIONS STYLING --------------- */

/* General Card Styling for new sections */
/* Ensure existing .card styling applies, add margin if needed */
.container > .card { /* Target direct children cards of the main container */
    margin-bottom: 1.5rem; /* Add space between cards */
}
.container > .card:last-child {
    margin-bottom: 0; /* No margin for the last card */
}

/* List Styling */
#recipients-list .list-group-item,
#products-list .list-group-item,
#subscription-product-list .list-group-item {
    padding: 0.75rem 1.25rem;
    margin-bottom: 0.5rem; /* Space between items */
    border: 1px solid rgba(255, 255, 255, 0.125); /* Subtle border */
    background-color: rgba(255, 255, 255, 0.05); /* Slightly different background for list items */
    transition: background-color 0.15s ease-in-out;
}

#recipients-list .list-group-item:hover,
#products-list .list-group-item:hover,
#subscription-product-list .list-group-item:hover:not(.form-check) { /* Don't highlight checkbox items on hover quite as much */
    background-color: rgba(255, 255, 255, 0.1);
}

/* Align buttons in list items */
#recipients-list .list-group-item .btn,
#products-list .list-group-item .btn {
    margin-left: 0.5rem; /* Space between buttons or text and buttons */
}

#recipients-list .list-group-item span[title]:hover {
    text-decoration: underline;
    cursor: pointer;
}


/* Form Styling */
#recipient-form .form-control,
#product-form .form-control {
    background-color: rgba(255, 255, 255, 0.2); /* Lighter inputs */
    color: #333333; /* Dark text for inputs */
    border: 1px solid rgba(255, 255, 255, 0.3);
}
#recipient-form .form-control::placeholder,
#product-form .form-control::placeholder {
    color: rgba(0, 0, 0, 0.5); /* Darker placeholder text */
}
#recipient-form .btn,
#product-form .btn {
    /* Using btn-neumorphic already, so specific overrides if needed */
}


/* Subscription Section Styling */
#recipient-subscriptions-section {
    padding: 1rem;
    background-color: rgba(0, 0, 0, 0.1); /* Slightly differentiate background */
    border-radius: 0.25rem; /* Match Bootstrap card/list group item radius */
    margin-top: 1.5rem; /* Space above this section */
}

#recipient-subscriptions-section h4 {
    margin-bottom: 1rem;
    color: #333333; /* Dark text for title */
}
#recipient-subscriptions-section #selected-recipient-email{
    font-weight: bold;
    color: #89f7fe; /* Highlight email */
}


#subscription-product-list .form-check {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
}

#subscription-product-list .form-check-label {
    margin-left: 0.5rem; /* Space between checkbox and label */
    color: #333333; /* Dark text for product names in subscription list */
}
#subscriptions-ui .list-wrapper {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

#subscriptions-ui .collapse-toggle {
  font-weight: 700;
  display: inline-flex;
  align-items: center;
  margin-right: 0.25rem;
}

#subscriptions-ui .collapse-toggle svg {
  width: 2em;
  height: 2em;
  stroke-width: 3;
  transition: transform 0.2s ease;
}

#subscriptions-ui .collapse-toggle.collapsed svg {
  transform: rotate(-90deg);
}

@media (max-width: 767.98px) {
  #subscriptions-ui .list-wrapper {
    max-height: none;
    overflow-y: visible;
  }
}
#subscription-product-list .form-check-input {
    /* border-color: rgba(255,255,255,0.5); */ /* Conflicting border, handled by more specific rule */
}
/*
#subscription-product-list .form-check-input:checked {
    background-color: var(--success-color);
    border-color: var(--success-color);
}
*/


/* Ensure buttons with icons are aligned */
.btn .lucide {
    vertical-align: text-bottom; /* Align icons better with button text */
    margin-right: 0.25rem; /* Small space between icon and text */
}

/* Responsive adjustments: Bootstrap handles most of this.
   These are just minor tweaks if needed. */
@media (max-width: 768px) {
    .card {
        margin-left: 15px;
        margin-right: 15px;
    }
    .container > .card { /* Ensure margins are consistent on smaller screens */
        margin-left: 0;
        margin-right: 0;
    }
}

/* Additional Responsive Styles for Mobile Friendliness */

@media (max-width: 768px) {
  .card h1, .card .h1 { font-size: 1.75rem; }
  .card h2, .card .h2 { font-size: 1.5rem; }
  .card h3, .card .h3 { font-size: 1.3rem; }
  .card h4, .card .h4 { font-size: 1.15rem; }
  .card h5, .card .h5 { font-size: 1.1rem; }

  /* Adjust body font size if overall smaller text is desired */
  /* body { font-size: 0.95rem; } */
}

@media (max-width: 576px) {
  .card h1, .card .h1 { font-size: 1.5rem; }
  .card h2, .card .h2 { font-size: 1.25rem; }
  .card h3, .card .h3 { font-size: 1.15rem; }
  .card h4, .card .h4 { font-size: 1.05rem; }
  .card h5, .card .h5 { font-size: 1rem; }
  .card p, .card li, .card .form-label, .card .form-check-label { font-size: 0.9rem; }

  .btn, .btn-neumorphic { /* Affects all buttons including neumorphic */
    font-size: 0.9rem !important; /* Ensure override if btn-neumorphic has its own font-size */
    padding: 10px 15px !important;
  }

  #recipients-list .list-group-item .btn,
  #products-list .list-group-item .btn {
    padding: 0.3rem 0.6rem !important; /* More specific selector for padding */
    font-size: 0.8rem !important;
  }

  .btn .lucide {
     margin-right: 0.2rem; /* Reduce space slightly */
     width: 1em; /* Ensure icon scales with button font size */
     height: 1em;
  }

  .card-body {
    padding: 1rem; /* Reduce padding from Bootstrap's default 1.25rem if needed */
  }
  /* Example: Adjust container padding if global py-4 is too much, though Bootstrap's is usually fine */
  /* .container.py-4 {
    padding-top: 1rem !important;
    padding-bottom: 1rem !important;
  } */

  /* FAB adjustments for smaller screens */
  .fab {
    width: 48px;
    height: 48px;
    bottom: 15px;
    right: 15px;
  }
  .fab i, .fab svg {
    width: 20px;
    height: 20px;
  }
}

#recipient-form .input-group .form-control {
  margin-right: 0.5rem;
}

#recipient-form .input-group .btn {
  margin-left: 0;
}

@media (max-width: 420px) { /* Adjusted from 400px to give a little more room before stacking */
  #recipient-form .input-group {
    flex-direction: column;
  }
  #recipient-form .input-group .form-control {
    margin-bottom: 0.5rem;
    margin-right: 0;
    border-radius: .375rem !important; /* Bootstrap's default form-control border-radius */
    width: 100%;
  }
  #recipient-form .input-group .btn {
    width: 100%;
  }

  /* Reduce font size even further for very small devices if necessary */
  .card p, .card li, .card .form-label, .card .form-check-label { font-size: 0.85rem; }
  .btn, .btn-neumorphic {
    font-size: 0.85rem !important;
    padding: 8px 12px !important;
  }
  #recipients-list .list-group-item .btn,
  #products-list .list-group-item .btn {
    padding: 0.25rem 0.5rem !important;
    font-size: 0.75rem !important;
  }
}

#user-subscribed-list li.paused {
  opacity: 0.6;
}

#subscriptions-info-toggle {
  cursor: pointer;
}

@media (max-width: 576px) {
  .product-list-item-mobile .product-details .product-name {
    text-align: left;
    font-size: 1rem;
  }
  .product-list-item-mobile .product-details .product-url {
    text-align: left;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: block;
  }
  .product-list-item-mobile .product-controls {
    justify-content: flex-start;
    flex-wrap: nowrap;
  }
  .product-list-item-mobile .product-controls .time-slot-group {
    flex-basis: auto;
  }
  .product-list-item-mobile .product-controls .form-control-sm {
    padding: .2rem .4rem;
    font-size: 0.8em;
    min-width: 90px;
  }
  .product-list-item-mobile .product-controls .btn-icon {
    line-height: 1;
  }
  .product-list-item-mobile .product-controls .lucide-small {
    width: 16px;
    height: 16px;
  }
  .product-list-item-mobile .product-details .lucide-xs {
    width: 12px;
    height: 12px;
  }

  /* Allow long title to wrap with close button below */
  #recipient-subscriptions-title {
    flex-wrap: wrap;
  }
  #recipient-subscriptions-title #close-subscriptions-btn {
    margin-top: 0.5rem;
  }
}

/* Styling for new icon buttons in lists */

/* This rule was for the general collapse button, will be replaced by a more specific one below. */
/* .btn[data-bs-toggle="collapse"] {
  display: flex;
  justify-content: space-between;
  align-items: center;
} */

/* Collapsible Section Trigger Buttons in Management Accordion */
#managementAccordion > .btn[data-bs-toggle="collapse"] {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #e9ecef; /* Slightly darker, more like an active header */
  color: #212529; /* Standard dark text */
  border: 1px solid #ced4da; /* Slightly darker border */
  text-align: left;
  box-shadow: none !important;
  font-weight: 600; /* A bit bolder for header feel */
  width: 100%;
  padding: 0.75rem 1.25rem; /* More like card-header padding */
  border-radius: .375rem; /* Standard Bootstrap card/button radius */
  transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out;
  /* margin-bottom is handled by Bootstrap's .mb-2 class on the button in HTML */
}

#managementAccordion > .btn[data-bs-toggle="collapse"]:hover {
  background-color: #dee2e6; /* Lighten slightly on hover, or darken if preferred */
  border-color: #adb5bd;
}

#managementAccordion > .btn[data-bs-toggle="collapse"]:focus,
#managementAccordion > .btn[data-bs-toggle="collapse"].focus { /* .focus class for JS-triggered focus */
  outline: 0;
  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25); /* Standard Bootstrap focus shadow */
}


#managementAccordion > .btn[data-bs-toggle="collapse"] .lucide {
  color: #212529; /* Match text color */
  /* transition: transform 0.2s ease-in-out; -- For rotating icon, not used with data-lucide swap */
}

/* Hide H2 titles inside the collapsible cards as buttons serve as headers */
/* This rule should remain as it is */
#recipientManagementCollapse .card-body h2.text-primary,
#productManagementCollapse .card-body h2.text-primary {
  display: none;
}

.list-group-item .btn-manage-icon,
.list-group-item .btn-delete-icon {
  padding: 0.35rem 0.5rem; /* Comfortable tap target */
  line-height: 1; /* Ensure icon is centered */
  vertical-align: middle; /* Align button with other elements if needed */
}

.list-group-item .btn-manage-icon .lucide,
.list-group-item .btn-delete-icon .lucide {
  width: 1em; /* Icon size relative to button's font size */
  height: 1em;
  vertical-align: middle; /* Better icon alignment within button */
}

/* Specific color for Manage button icon (using Bootstrap's outline-primary by default now) */
/* .list-group-item .btn-manage-icon { */
  /* color: var(--bs-primary); */ /* Already handled by btn-outline-primary */
  /* border-color: var(--bs-primary); */ /* Already handled by btn-outline-primary */
/* } */
/* .list-group-item .btn-manage-icon:hover { */
  /* background-color: var(--bs-primary-bg-subtle); */ /* Bootstrap handles hover for outline buttons */
/* } */

/* Ensure delete button is styled as danger (using Bootstrap's outline-danger by default now) */
/* .list-group-item .btn-delete-icon { */
  /* color: var(--bs-danger); */ /* Already handled by btn-outline-danger */
  /* border-color: var(--bs-danger); */ /* Already handled by btn-outline-danger */
/* } */
/* .list-group-item .btn-delete-icon:hover { */
  /* background-color: var(--bs-danger-bg-subtle); */ /* Bootstrap handles hover for outline buttons */
/* } */

/* Adjust spacing between icon buttons */
.list-group-item .buttons-div .btn + .btn { /* Targets subsequent buttons within .buttons-div */
    margin-left: 0.35rem; /* Ensure spacing, me-2 is 0.5rem, this is slightly less for icon buttons */
}

/* Override default .btn .lucide margin if it's too large for icon-only buttons */
.list-group-item .btn-manage-icon .lucide,
.list-group-item .btn-delete-icon .lucide {
    margin-right: 0 !important; /* Remove margin for icon-only buttons */
}

/* Ensure .buttons-div itself is aligned correctly since list-group-item is d-flex justify-content-between */
.list-group-item > .buttons-div {
    /* align-self: center; */ /* Example: if vertical centering is needed */
    /* margin-left: auto; */ /* This would push to the far right, but justify-content-between already handles separation */
}

/* Styling for Edit Product icon button */
.list-group-item .btn-edit-icon {
  padding: 0.35rem 0.5rem;
  line-height: 1;
  /* color: var(--bs-secondary); -- Already set by btn-outline-secondary */
  /* border-color: var(--bs-secondary); -- Already set by btn-outline-secondary */
}
.list-group-item .btn-edit-icon .lucide {
  width: 1em;
  height: 1em;
  vertical-align: middle;
  margin-right: 0 !important; /* Override default if any */
}

/* Close button inside Manage Subscriptions heading */
#close-subscriptions-btn {
  padding: 0.25rem 0.5rem;
  line-height: 1;
}
#close-subscriptions-btn .lucide {
  width: 1em;
  height: 1em;
  margin-right: 0 !important;
}
/* .list-group-item .btn-edit-icon:hover { */
  /* background-color: var(--bs-gray-200); -- Bootstrap handles this for outline buttons */
/* } */

/* Styling for product URL snippet */
.list-group-item small.text-muted a {
  text-decoration: none; /* Remove underline from link snippet */
  color: inherit; /* Inherit color from .text-muted */
}
.list-group-item small.text-muted a:hover {
  text-decoration: underline;
  color: var(--bs-primary); /* Highlight link on hover */
}
.lucide-small { /* For smaller icons like external-link in text */
   width: 0.8em;
   height: 0.8em;
   margin-left: 0.2em;
   vertical-align: baseline; /* Align better with text */
}

/* Ensure modal text is dark */
.modal-content {
   color: #333333; /* Default dark text color */
}
.modal-content .form-label { /* Specifically for labels within modal */
   color: #333333;
}
/* Ensure modal inputs also have dark text if not inheriting */
.modal-content .form-control {
    color: #333333;
}
.modal-content .form-control::placeholder {
    color: rgba(0, 0, 0, 0.5); /* Darker placeholder text for modal inputs */
}

/* Scrollable Modal Body */
#subscriptionModalBody {
  max-height: 450px; /* Adjusted height slightly */
  overflow-y: auto;
}

/* Square Green Checkboxes for Subscription Modal */
#subscriptionModalBody .form-check-input[type="checkbox"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  width: 1.25em;
  height: 1.25em;
  background-color: #fff;
  border: 1px solid #adb5bd;
  border-radius: 0; /* Sharp corners */
  position: relative;
  cursor: pointer;
  vertical-align: middle; /* Helps align with label text */
  margin-right: 0.5rem; /* Space between checkbox and label, consistent with existing */
  background-image: none !important; /* Remove Bootstrap's default SVG image */
}

#subscriptionModalBody .form-check-input[type="checkbox"]:checked {
  background-color: #28a745; /* Green background */
  border-color: #28a745; /* Green border */
  background-image: none !important; /* Also for checked state */
}

#subscriptionModalBody .form-check-input[type="checkbox"]:checked::after {
  content: "";
  position: absolute;
  left: 0.35em;
  top: 0.15em;
  width: 0.4em;
  height: 0.7em;
  border: solid white;
  border-width: 0 0.15em 0.15em 0;
  transform: rotate(45deg);
}


/* Refinements for Subscription Product List Checkboxes */
/* These existing rules will apply ON TOP of the above for items within #subscription-product-list if that ID is used within the modal */
/* If #subscriptionModalBody is the parent of #subscription-product-list, the new rules are more specific for the general modal body context */
#subscription-product-list .list-group-item.form-check {
  display: flex; /* Use flexbox for alignment */
  align-items: center; /* Vertically center checkbox and label text */
  padding-left: 1rem; /* Remove default form-check padding */
}

#subscription-product-list .form-check-input {
  position: static;
  float: none;
  margin: 0; /* Removed specific margin here as it's handled by the new rule for #subscriptionModalBody .form-check-input */
  /* The align-items: center on the parent should handle most vertical alignment needs. */
}

#subscription-product-list .form-check-label {
  margin-left: 0;
}

/* Styling for settings offcanvas so it matches the blurred card look */
#settingsPane.offcanvas {
  background-color: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-left: 1px solid rgba(209, 213, 219, 0.3);
  color: #333333;
}

@media (max-width: 767.98px) {
  #settingsPane.offcanvas-end {
    width: 50vw;
  }
}

#settingsPane .offcanvas-header {
  border-bottom: 1px solid rgba(209, 213, 219, 0.3);
}

#settingsPane .offcanvas-title {
  color: #333333;
}

#settingsPane hr {
  margin: 1rem 0;
  border-color: rgba(209, 213, 219, 0.3);
}

/* Save All Subscriptions Button Styles */

/* Initial state (btn-outline-primary is the base in JS when no changes) */
#saveAllSubscriptionsBtn {
  /* Default styling will be btn btn-outline-primary assigned via JS initially */
  /* Ensure transition for smooth style changes */
  transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, color 0.15s ease-in-out, opacity 0.15s ease-in-out;
}

/* State when there are unsaved changes */
/* This class will be added via JavaScript. */
#saveAllSubscriptionsBtn.btn-unsaved-changes {
  background-color: #0d6efd; /* Bootstrap primary blue */
  border-color: #0d6efd;
  color: #fff;
}
/* Ensure hover/focus states for unsaved changes are consistent with btn-primary */
#saveAllSubscriptionsBtn.btn-unsaved-changes:hover {
    background-color: #0b5ed7;
    border-color: #0a58ca;
}
#saveAllSubscriptionsBtn.btn-unsaved-changes:focus,
#saveAllSubscriptionsBtn.btn-unsaved-changes.focus { /* .focus class for JS focus */
    background-color: #0b5ed7;
    border-color: #0a58ca;
    box-shadow: 0 0 0 0.25rem rgba(49, 132, 253, 0.5); /* Bootstrap's primary focus shadow */
}


/* Loading state (when saving) */
/* This class will be added via JavaScript. */
#saveAllSubscriptionsBtn.btn-loading {
  /* Style will be based on btn-primary (unsaved changes style) */
  background-color: #0d6efd;
  border-color: #0d6efd;
  color: #fff;
  opacity: 0.65 !important; /* Indicate disabled state, !important if other opacity rules interfere */
  cursor: not-allowed !important; /* Indicate non-interactive */
  /* Prevent hover/focus effects when loading */
  pointer-events: none;
}

/* Spinner for loading state - to be embedded in the button text by JS */
#saveAllSubscriptionsBtn .spinner-border-sm {
  margin-right: 0.5rem;
  vertical-align: text-bottom; /* Align spinner nicely with text */
}

/* Subscription Modal UI Enhancements */
#subscriptionModal .modal-content {
  /* Using existing card background with blur: rgba(255, 255, 255, 0.1) and backdrop-filter: blur(20px); */
  /* If a more opaque/distinct background is needed, it can be set here, but for theme consistency, we inherit. */
  border-radius: 0.5rem; /* Consistent with other cards, like .card */
  border: 1px solid rgba(209, 213, 219, 0.3); /* Match card border */
}

#subscriptionModal .modal-header {
  background-color: rgba(0, 0, 0, 0.03); /* Subtle header background */
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 1rem 1.5rem;
}

/* Target h5 if #subscriptionModalHeaderTitle is an h5, or just the ID */
#subscriptionModalHeaderTitle {
  font-weight: 600; /* Bolder title */
  font-size: 1.2rem; /* Adjusted size */
  color: #333; /* Ensure good contrast on the light header bg */
}

#subscriptionModal .modal-body {
  /* Existing: max-height: 450px; overflow-y: auto; */
  padding: 1rem 1.25rem; /* Standard Bootstrap modal body padding or adjust as needed */
}

/* Optional: Refined hover for list items if current is not distinct enough */
/* #subscriptionModalBody .list-group-item:hover {
  background-color: rgba(0, 0, 0, 0.04);
} */

#subscriptionModal .modal-footer {
  background-color: rgba(0, 0, 0, 0.03); /* Match header or be neutral */
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  padding: 0.75rem 1.5rem;
  display: flex;
  justify-content: flex-end; /* Align buttons to the right */
}

#subscriptionModal .modal-footer .btn + .btn { /* For spacing between buttons like "Close" and "Save All" */
  margin-left: 0.5rem;
}

/* Toast Notification Styles */

.toast-container {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1090; /* Higher than Bootstrap modal z-index (usually 1050-1060 for modal, 1070 for modal backdrop) */
  display: flex;
  flex-direction: column;
  align-items: flex-end; /* Toasts stack nicely from the right */
  width: auto; /* Allow toasts to define their own width up to max-width */
}

.toast-notification {
  background-color: #fff; /* Default background */
  color: #333;
  padding: 12px 20px;
  margin-bottom: 10px;
  border-radius: 0.375rem; /* Bootstrap's default */
  box-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.1);
  opacity: 0; /* Start hidden for fade-in */
  transform: translateX(100%); /* Start off-screen to the right for slide-in effect */
  transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out;
  min-width: 280px; /* Ensure a decent minimum width */
  max-width: 380px; /* Max width */
  /* Allow flex behavior for content inside if needed, e.g., for close button alignment */
  display: flex;
  justify-content: space-between; /* If a close button is present */
  align-items: center;
}

.toast-notification.show {
  opacity: 1;
  transform: translateX(0); /* Slide in to view */
}

/* States for different notification types */
.toast-notification.success {
  background-color: #d1e7dd; /* Bootstrap success background subtle */
  color: #0f5132; /* Bootstrap success text subtle */
  border-left: 5px solid var(--success-color); /* Accent border using our variable */
}

.toast-notification.error {
  background-color: #f8d7da; /* Bootstrap danger background subtle */
  color: #842029; /* Bootstrap danger text subtle */
  border-left: 5px solid var(--danger-color); /* Accent border using our variable */
}

.toast-notification.warning {
  background-color: #fff3cd; /* Bootstrap warning background subtle */
  color: #664d03; /* Bootstrap warning text subtle */
  border-left: 5px solid #ffc107; /* Accent border */
}

/* Optional: Close button styling if added to toast markup */
.toast-notification .btn-close-toast {
  background: none;
  border: none;
  color: inherit; /* Inherits color from parent (.success, .error, etc.) */
  /* float: right; -- No longer needed with flex */
  font-size: 1.2rem;
  font-weight: bold;
  line-height: 1;
  opacity: 0.6; /* Slightly more visible than BS default for btn-close */
  margin-left: 15px; /* Space between message and close button */
  padding: 0; /* Reset padding */
  cursor: pointer;
  text-shadow: none; /* Ensure no text shadow if parent has one */
}
.toast-notification .btn-close-toast:hover {
  opacity: 0.9;
}

/* Fun greeting styling */
#welcome-msg {
  font-weight: 700;
  transition: all 0.6s ease;
  margin-left: 2rem;
}

#welcome-msg.initial {
  font-size: 2.5rem;
  text-align: center;
  animation: welcomeBounce 1.2s ease;
}

#welcome-msg.shrunk {
  font-size: 1.75rem;
  text-align: start;
}

@media (max-width: 576px) {
  #welcome-msg {
    margin-left: 1rem;
  }
  #welcome-msg.initial {
    font-size: 1.8rem;
    word-break: break-word;
  }
  #welcome-msg.shrunk {
    font-size: 1.5rem;
  }
}

@keyframes welcomeBounce {
  0% { opacity: 0; transform: scale(0.9); }
  60% { opacity: 1; transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* Used by user-subscriptions.js to hide non-matching products during search */
.product-item-hidden {
  display: none !important;
}

/* Overlay shown during async operations */
.loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2000;
}
